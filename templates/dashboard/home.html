{% extends 'dashboard/base_dashboard.html' %}

{% block title %}{{ title }}{% endblock %}
{% block page_title %}ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰{% endblock %}

{% block content %}
<!-- çµ±è¨ˆæƒ…å ± -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-number">{{ stats.today_bookings }}</div>
        <div class="stat-label">ä»Šæ—¥ã®äºˆç´„</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ stats.pending_bookings }}</div>
        <div class="stat-label">æ‰¿èªå¾…ã¡</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ stats.total_customers }}</div>
        <div class="stat-label">ç·é¡§å®¢æ•°</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ stats.this_month_bookings }}</div>
        <div class="stat-label">ä»Šæœˆã®äºˆç´„</div>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
    <!-- ä»Šæ—¥ã®äºˆç´„ -->
    <div class="card">
        <div class="card-header">
            <h3>ä»Šæ—¥ã®äºˆç´„ ({{ today|date:"Yå¹´mæœˆdæ—¥" }})</h3>
        </div>
        <div class="card-body">
            {% if today_bookings %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>æ™‚é–“</th>
                            <th>ãŠå®¢æ§˜</th>
                            <th>ã‚µãƒ¼ãƒ“ã‚¹</th>
                            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for booking in today_bookings %}
                        <tr>
                            <td>{{ booking.booking_time }}</td>
                            <td>
                                <a href="{% url 'dashboard:booking_detail' booking.id %}">
                                    {{ booking.customer.name }}
                                </a>
                            </td>
                            <td>{{ booking.service.name }}</td>
                            <td>
                                {% if booking.status == 'pending' %}
                                    <span class="badge badge-pending">ç”³è¾¼ä¸­</span>
                                {% elif booking.status == 'confirmed' %}
                                    <span class="badge badge-confirmed">ç¢ºå®š</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p style="text-align: center; color: #666; padding: 2rem;">ä»Šæ—¥ã®äºˆç´„ã¯ã‚ã‚Šã¾ã›ã‚“</p>
            {% endif %}
        </div>
    </div>

    <!-- ä»Šå¾Œã®äºˆç´„ -->
    <div class="card">
        <div class="card-header">
            <h3>ä»Šå¾Œã®äºˆç´„</h3>
        </div>
        <div class="card-body">
            {% if upcoming_bookings %}
                <table class="table">
                    <thead>
                        <tr>
                            <th>æ—¥æ™‚</th>
                            <th>ãŠå®¢æ§˜</th>
                            <th>ã‚µãƒ¼ãƒ“ã‚¹</th>
                            <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for booking in upcoming_bookings %}
                        <tr>
                            <td>{{ booking.booking_date|date:"m/d" }}<br>{{ booking.booking_time }}</td>
                            <td>
                                <a href="{% url 'dashboard:booking_detail' booking.id %}">
                                    {{ booking.customer.name }}
                                </a>
                            </td>
                            <td>{{ booking.service.name }}</td>
                            <td>
                                {% if booking.status == 'pending' %}
                                    <span class="badge badge-pending">ç”³è¾¼ä¸­</span>
                                {% elif booking.status == 'confirmed' %}
                                    <span class="badge badge-confirmed">ç¢ºå®š</span>
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <div style="text-align: center; margin-top: 1rem;">
                    <a href="{% url 'dashboard:booking_list' %}" class="btn btn-primary">å…¨ã¦ã®äºˆç´„ã‚’è¦‹ã‚‹</a>
                </div>
            {% else %}
                <p style="text-align: center; color: #666; padding: 2rem;">ä»Šå¾Œã®äºˆç´„ã¯ã‚ã‚Šã¾ã›ã‚“</p>
            {% endif %}
        </div>
    </div>
</div>

<!-- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
<div class="card">
    <div class="card-header">
        <h3>ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
    </div>
    <div class="card-body">
        <div style="display: flex; gap: 1rem; justify-content: center;">
            <a href="{% url 'dashboard:calendar' %}" class="btn btn-primary">ğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º</a>
            <a href="{% url 'dashboard:booking_list' %}?status=pending" class="btn btn-warning">â³ æ‰¿èªå¾…ã¡ä¸€è¦§</a>
            <a href="{% url 'dashboard:customer_list' %}" class="btn btn-secondary">ğŸ‘¥ é¡§å®¢ç®¡ç†</a>
            <a href="/admin/" class="btn btn-secondary">âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</a>
        </div>
    </div>
</div>
{% endblock %}